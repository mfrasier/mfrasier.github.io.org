
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Testing Apollo With Websocket - Blog about things</title>
  <meta name="author" content="Marty Frasier">

  
  <meta name="description" content="We now have the apollo broker running on our virtual host and a route to hit for our webapp to generate messages. Our setup our web server and PHP &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mfrasier.github.io/blog/2014/11/09/testing-apollo-with-websocket">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Blog about things" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Blog about things</a></h1>
  
    <h2>blogging experiment about hacking</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mfrasier.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Testing Apollo With Websocket</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-09T17:33:48-05:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:33 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>We now have the apollo broker running on our virtual host and a route to hit for our webapp to generate messages.</p>

<h4>Our setup</h4>

<ul>
<li>our web server and PHP backend app are running on our virtual machine (IP=10.0.0.10).</li>
<li>apache apollo broker is running on the virtual machine.</li>
<li>our webapp server will send a test message to tcp://localhost:61613/topic/okcra-api-ops when route sendStompMessage is hit.</li>
<li>added a firewall rule to allow access to port tcp/61623 where apollo is listening for websocket connections.</li>
<li>we want to display those messages near real-time in a web browser, running on the host.</li>
</ul>


<h4>web client</h4>

<p>Apollo is shipped with example code, one of which is a websockets example.  The html page is located at <APOLLO_INSTALL_DIR>/examples/stomp/websocket/index.html.</p>

<p>We will load that page into our browser, fill in our connection details, and connect to the apollo broker on our virtual hosts.  When successful, it will wait and display any new messages  appearing in the topic or queue.</p>

<!-- more -->


<p>Next, we will hit the URI to have the web server generate a message.  We should see that message reflected almost immediately on our test web page.</p>

<p>Here is the test result.  Using curl in the terminal window to invoke the URI sent a message to the broker which was displayed on the websocket chat example page.  Success!</p>

<p><img src="/images/websocket_client.png"></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Marty Frasier</span></span>

      




<time class='entry-date' datetime='2014-11-09T17:33:48-05:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:33 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://mfrasier.github.io/blog/2014/11/09/testing-apollo-with-websocket/" data-via="" data-counturl="http://mfrasier.github.io/blog/2014/11/09/testing-apollo-with-websocket/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/11/08/fun-with-puphpet/" title="Previous Post: fun with puPHPet">&laquo; fun with puPHPet</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/11/09/testing-apollo-with-websocket/">Testing Apollo With Websocket</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/08/fun-with-puphpet/">Fun With puPHPet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/05/apache-apollo-start/">Apache Apollo Start</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/11/some-elasticsearch-features/">Some Elasticsearch Features</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/10/querying-elasticsearch/">Querying Elasticsearch</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Marty Frasier -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
